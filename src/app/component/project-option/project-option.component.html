<form (submit)="preventSubmit($event)">
    <div fxLayout="row" fxLayoutAlign="space-between center wrap">
        <div fxLayout="column" fxLayoutGap="1em" fxFlex.xs="100%" fxFlex.sm="100%" fxFlex.md="30%" fxFlex.lg="30%" fxFlex.xl="30%">
            <div>
                <upload-image-button (onLoad)="onLoadingImageCallback($event)"></upload-image-button>
            </div>
            <div fxLayout="row" fxLayoutAlign="start start">
                <mat-form-field>
                    <mat-select multiple aria-label="palettes" placeholder="Palettes" [(ngModel)]="project.palettes" name="palettes" (selectionChange)="callback()" [compareWith]="paletteEquality">
                        <mat-option *ngFor="let palette of availablePalettes | async" [value]="palette">
                            {{palette.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <mat-select aria-label="board" placeholder="Board type" [(ngModel)]="project.board" name="board" (selectionChange)="callback()">
                        <mat-option *ngFor="let board of availableBoards" [value]="board">
                            {{board.name}} ({{board.nbBeadPerRow}}x{{board.nbBeadPerRow}})
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <mat-select aria-label="matching" placeholder="Matching technique" [(ngModel)]="project.matching" name="matching" (selectionChange)="callback()">
                        <mat-option *ngFor="let matching of availableMatchings" [value]="matching">
                            {{matching.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-checkbox [(ngModel)]="project.dithering" name="dithering" (change)="callback()">Dithering</mat-checkbox>
            </div>
            <div>
                <board-size [project]="project" (onBoardSizeChange)="callback()"></board-size>
            </div>
        </div>
        <div fxLayout="column" fxLayoutGap="5px" fxFlex.xs="100%" fxFlex.sm="100%" fxFlex.md="70%" fxFlex.lg="70%" fxFlex.xl="70%">
            <div fxLayout="row wrap">
                <mat-slide-toggle [checked]="enableAllPaletteEntry" (change)="toggleAll($event)">All</mat-slide-toggle>
            </div>

            <mat-divider [inset]="true"></mat-divider>

            <div fxLayout="row wrap" *ngFor="let palette of project.palettes">
                <div fxFlex.xs="100%" fxFlex.sm="50%" fxFlex.md="33%" fxFlex.lg="25%" fxFlex.xl="20%" fxLayoutAlign="start center" *ngFor="let entry of palette.entries">
                    <palette-entry [entry]="entry" (onToggleCallback)="callback()"></palette-entry>
                </div>
                <mat-divider style="margin-top: 5px;" [inset]="true"></mat-divider>
            </div>
            <div fxLayout="row wrap" fxLayoutAlign="center center">
                <div class="mat-small mat-caption">Something wrong about colors ? Please fill an <a href="https://github.com/maxcleme/beadcolors/issues/new" target="blank">issue</a>.</div>   
            </div>
        </div>
    </div>
</form>